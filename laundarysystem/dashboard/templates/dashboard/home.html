{% extends 'base.html' %}
{% load static %}

{% block content %}
<!-- Add Bootstrap CSS link -->
<link rel="stylesheet" href="{% static 'bootstrap.min.css' %}">
<br>
<div class="container">
    <div class="row">
        <div class="col-md-3">
            <div class="sidebar">
                <ul class="nav flex-column bg-secondary">
                    <li class="nav-item">
                        <a class="nav-link text-white" href="#users" onclick="showContent('users')">Users</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="#orders" onclick="showContent('orders')">Orders</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="#collection-centers" onclick="showContent('collection-centers')">Collection Centers</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="col-md-9">
            <div id="users" class="content-section">
                <h2>Users</h2>
                <ul class="list-group bg-secondary">
                    {% for user in users %}
                    <li class="list-group-item text-black">
                        <div class="user-header" onclick="toggleUserDetails(this)">
                            {{ user.username }}
                        </div>
                        <div class="user-details" style="display: none;">
                            <p>First Name: {{ user.first_name }}</p>
                            <p>Last Name: {{ user.last_name }}</p>
                            <p>Username: {{ user.username }}</p>
                            <p>Email: {{ user.email }}</p>
                            <p>Password: *****</p>
                        </div>
                    </li>
                    {% endfor %}
                </ul>
            </div>
            <div id="orders" class="content-section">
                <h2>Orders</h2>
                <ul class="list-group bg-secondary">
                    {% for order in orders %}
                    <li class="list-group-item text-black">
                        <div class="order-header" onclick="toggleOrderDetails(this)">
                            Order #{{ order.pk }}
                        </div>
                        <div class="order-details" style="display: none;">
                            <p>User: {{ order.user }}</p>
                            <p>Collection Center: {{ order.collection_center }}</p>
                            <p>Pickup Location: {{ order.pickup_location }}</p>
                            <p>Pickup Date: {{ order.pickup_date }}</p>
                            <p>Status: {{ order.status }}</p>
                        </div>
                    </li>
                    {% endfor %}
                </ul>
            </div>
            <div id="collection-centers" class="content-section">
                <h2>Collection Centers</h2>
                <ul class="list-group bg-secondary">
                    {% for center in collection_centers %}
                    <li class="list-group-item text-black">
                        <div class="center-header" onclick="toggleCenterDetails(this)">
                            {{ center.name }}
                        </div>
                        <div class="center-details" style="display: none;">
                            <p>Address: {{ center.address }}</p>
                            <p>Description: {{ center.description }}</p>
                            <p>Active Status: {% if center.active %}Active{% else %}Inactive{% endif %}</p>
                            <p>Incharge: {{ center.incharge }}</p>
                        </div>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- Add Bootstrap JS script -->
<script src="{% static 'bootstrap.min.js' %}"></script>
<script>
    function showContent(sectionId) {
        var contentSections = document.getElementsByClassName("content-section");
        for (var i = 0; i < contentSections.length; i++) {
            contentSections[i].style.display = "none";
        }
        document.getElementById(sectionId).style.display = "block";
    }

    // Hide all content sections initially
    var contentSections = document.getElementsByClassName("content-section");
    for (var i = 0; i < contentSections.length; i++) {
        contentSections[i].style.display = "none";
    }

    function toggleOrderDetails(element) {
        var details = element.nextElementSibling;
        if (details.style.display === "none") {
            details.style.display = "block";
        } else {
            details.style.display = "none";
        }
    }

    function toggleCenterDetails(element) {
        var details = element.nextElementSibling;
        if (details.style.display === "none") {
            details.style.display = "block";
        } else {
            details.style.display = "none";
        }
    }

    function toggleUserDetails(element) {
        var details = element.nextElementSibling;
        if (details.style.display === "none") {
            details.style.display = "block";
        } else {
            details.style.display = "none";
        }
    }
</script>
{% endblock %}
